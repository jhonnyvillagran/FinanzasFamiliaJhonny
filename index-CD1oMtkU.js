_import_meta_.env=void 0;function _mergeNamespaces(o,i){for(var _=0;_<i.length;_++){const $=i[_];if(typeof $!="string"&&!Array.isArray($)){for(const j in $)if(j!=="default"&&!(j in o)){const _e=Object.getOwnPropertyDescriptor($,j);_e&&Object.defineProperty(o,j,_e.get?_e:{enumerable:!0,get:()=>$[j]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const j of document.querySelectorAll('link[rel="modulepreload"]'))$(j);new MutationObserver(j=>{for(const _e of j)if(_e.type==="childList")for(const et of _e.addedNodes)et.tagName==="LINK"&&et.rel==="modulepreload"&&$(et)}).observe(document,{childList:!0,subtree:!0});function _(j){const _e={};return j.integrity&&(_e.integrity=j.integrity),j.referrerPolicy&&(_e.referrerPolicy=j.referrerPolicy),j.crossOrigin==="use-credentials"?_e.credentials="include":j.crossOrigin==="anonymous"?_e.credentials="omit":_e.credentials="same-origin",_e}function $(j){if(j.ep)return;j.ep=!0;const _e=_(j);fetch(j.href,_e)}})();var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),jsxRuntimeExports=jsxRuntime.exports;var client={};(function(o){var i=reactDom.exports;Object.defineProperty(o,"__esModule",{value:!0}),o.createRoot=function(j,_e){return i.createRoot(j,_e)},o.findDOMNode=function(j){return i.findDOMNode(j)},o.flushSync=function(j,_e){return i.flushSync(j,_e)},o.hydrate=function(j,_e,et){return i.hydrate(j,_e,et)},o.render=function(j,_e,et){return i.render(j,_e,et)},o.unmountComponentAtNode=function(j){return i.unmountComponentAtNode(j)},o.unstable_batchedUpdates=function(j,_e){return i.unstable_batchedUpdates(j,_e)},o.unstable_renderSubtreeIntoContainer=function(j,_e,et,tt){return i.unstable_renderSubtreeIntoContainer(j,_e,et,tt)},o.version=function(){return i.version}})(client);const es={code:"es",formatDistance:function(o,i,_,j){var _e,et=j!=null&&j.addSuffix,tt=j!=null&&j.comparison?j.comparison:0;i=String(i);const rt=tt<0?-1:1;switch(o){case"lessThanXSeconds":_e=et?{one:"hace menos de un segundo",other:"hace menos de {{count}} segundos"}:{one:"menos de un segundo",other:"menos de {{count}} segundos"};break;case"xSeconds":_e=et?{one:"hace 1 segundo",other:"hace {{count}} segundos"}:{one:"1 segundo",other:"{{count}} segundos"};break;case"halfAMinute":_e=et?"hace medio minuto":"medio minuto";break;case"lessThanXMinutes":_e=et?{one:"hace menos de un minuto",other:"hace menos de {{count}} minutos"}:{one:"menos de un minuto",other:"menos de {{count}} minutos"};break;case"xMinutes":_e=et?{one:"hace 1 minuto",other:"hace {{count}} minutos"}:{one:"1 minuto",other:"{{count}} minutos"};break;case"aboutXHours":_e=et?{one:"hace aproximadamente 1 hora",other:"hace aproximadamente {{count}} horas"}:{one:"aproximadamente 1 hora",other:"aproximadamente {{count}} horas"};break;case"xHours":_e=et?{one:"hace 1 hora",other:"hace {{count}} horas"}:{one:"1 hora",other:"{{count}} horas"};break;case"xDays":_e=et?{one:"hace 1 día",other:"hace {{count}} días"}:{one:"1 día",other:"{{count}} días"};break;case"aboutXWeeks":_e=et?{one:"hace aproximadamente 1 semana",other:"hace aproximadamente {{count}} semanas"}:{one:"aproximadamente 1 semana",other:"aproximadamente {{count}} semanas"};break;case"xWeeks":_e=et?{one:"hace 1 semana",other:"hace {{count}} semanas"}:{one:"1 semana",other:"{{count}} semanas"};break;case"aboutXMonths":_e=et?{one:"hace aproximadamente 1 mes",other:"hace aproximadamente {{count}} meses"}:{one:"aproximadamente 1 mes",other:"aproximadamente {{count}} meses"};break;case"xMonths":_e=et?{one:"hace 1 mes",other:"hace {{count}} meses"}:{one:"1 mes",other:"{{count}} meses"};break;case"aboutXYears":_e=et?{one:"hace aproximadamente 1 año",other:"hace aproximadamente {{count}} años"}:{one:"aproximadamente 1 año",other:"aproximadamente {{count}} años"};break;case"xYears":_e=et?{one:"hace 1 año",other:"hace {{count}} años"}:{one:"1 año",other:"{{count}} años"};break;case"overXYears":_e=et?{one:"hace más de 1 año",other:"hace más de {{count}} años"}:{one:"más de 1 año",other:"más de {{count}} años"};break;default:_e=et?"hace "+o:"{{count}} "+o}const nt=typeof _e=="string"?_e:i==="1"?_e.one:_e.other.replace("{{count}}",i);return et?rt===1?nt:"dentro de "+nt:nt},formatLong:formatLong,formatRelative:function(o,i,_,j){const _e=["ayer","hoy","mañana"];return _e[o]},localize:localize,match:match,options:{weekStartsOn:1,firstWeekContainsDate:1}},supabase=createClient(SUPABASE_URL,SUPABASE_KEY),DonutChartCustom = ({data: o,isDarkMode: i}) => {const _ = i ? "#f9fafb" : "#111827",$= i ? "#6b7280" : "#9ca3af";return jsxRuntimeExports.jsxs(ResponsiveContainer, {width: "100%",height: 300,children: [jsxRuntimeExports.jsx(PieChart, {children: jsxRuntimeExports.jsx(Pie, {data: o,cx: "50%",cy: "50%",innerRadius: 60,outerRadius: 80,fill: "#8884d8",paddingAngle: 5,dataKey: "value",label: ({cx: j,cy: _e,midAngle: et,innerRadius: tt,outerRadius: rt,value: nt,name: at}) => {const it = j + (rt + 30) * Math.cos(-et * (Math.PI / 180)),ot = _e + (rt + 30) * Math.sin(-et * (Math.PI / 180));return jsxRuntimeExports.jsxs("text", {x: it,y: ot,fill: _,textAnchor: it > j ? "start" : "end",dominantBaseline: "central",children: [`${at} - `, jsxRuntimeExports.jsx("tspan", {fontWeight: "bold",children: `$${new Intl.NumberFormat("es-UY").format(nt)}`})]})},children: o.map((j, _e) => jsxRuntimeExports.jsx(Cell, {fill: COLORS[_e % COLORS.length]}, `cell-${_e}`))})}), jsxRuntimeExports.jsx(Legend, {iconSize: 10,layout: "vertical",verticalAlign: "middle",align: "right",wrapperStyle: {color: _}})]})},Charts = ({categoryData: o,barDataDaily: i,barDataWeekly: _,barDataMonthly: $,isDarkMode: j}) => {const [_e, et] = reactExports.useState("daily"),rt = {daily: i,weekly: _,monthly: $}[_e],nt = j ? "#9ca3af" : "#6b7280";return jsxRuntimeExports.jsx("div", {className: "grid grid-cols-1 lg:grid-cols-2 gap-8",children: jsxRuntimeExports.jsxs("div", {className: "bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md border border-gray-200 dark:border-gray-700",children: [jsxRuntimeExports.jsx("h3", {className: "text-lg font-semibold text-gray-800 dark:text-white mb-4",children: "Gastos por Categoría"}), jsxRuntimeExports.jsx(DonutChartCustom, {data: o,isDarkMode: j})]})})},App = () => {const [o, i] = reactExports.useState(!0),[_, $] = reactExports.useState(!1),[j, _e] = reactExports.useState(null),[et, tt] = reactExports.useState(!1),[rt, nt] = reactExports.useState(Tab.Report),[at, it] = reactExports.useState(0),[ot, st] = reactExports.useState(0),[ut, lt] = reactExports.useState([]),[ht, ft] = reactExports.useState([]),[dt, ct] = reactExports.useState(null),[yt, pt] = reactExports.useState(!1),[gt, mt] = reactExports.useState(null),[vt, _t] = reactExports.useState(null),[Pt, bt] = reactExports.useState(null),[St, Et] = reactExports.useState(INITIAL_FORM_STATE),At = reactExports.useRef(null),[wt, Tt] = reactExports.useState("set"),[Bt, xt] = reactExports.useState(null),[$t, It] = reactExports.useState(!1),[Ot, Vt] = reactExports.useState(""),[Dt, qt] = reactExports.useState(""),[Ht, zt] = reactExports.useState(""),[Zt, er] = reactExports.useState(""),[kt, Lt] = reactExports.useState("login"),[Ft, Rt] = reactExports.useState(!1),[Wt, Ut] = reactExports.useState(null),[Kt, Jt] = reactExports.useState(!1),Xt = reactExports.useRef(new Set),[timeRange, setTimeRange] = reactExports.useState("month");reactExports.useEffect(() => {const Ct = () => {const Mt = localStorage.getItem("theme");Mt ? document.documentElement.classList.toggle("dark", Mt === "dark") : window.matchMedia("(prefers-color-scheme: dark)").matches ? document.documentElement.classList.add("dark") : document.documentElement.classList.remove("dark")};return Ct(), window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", Ct), () => window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change", Ct)}, []);const filteredExpenses = reactExports.useMemo(() => {const now = new Date();const montevideoDate = utcToZonedTime(now, "America/Montevideo");let start, end;switch (timeRange) {case "day":start = startOfDay(montevideoDate);end = endOfDay(montevideoDate);break;case "week":start = startOfWeek(montevideoDate, { weekStartsOn: 1 });end = endOfWeek(montevideoDate, { weekStartsOn: 1 });break;case "year":start = startOfYear(montevideoDate);end = endOfYear(montevideoDate);break;case "month":default:start = startOfMonth(montevideoDate);end = endOfMonth(montevideoDate);break;}return ut.filter(expense => {if (!expense.date) return false;const expenseDate = utcToZonedTime(parseISO(expense.date), "America/Montevideo");return expenseDate >= start && expenseDate <= end;});}, [ut, timeRange]);const ur = reactExports.useMemo(() => {const categoryTotals = filteredExpenses.reduce((acc, expense) => {const category = expense.category || "General";acc[category] = (acc[category] || 0) + expense.amount;return acc;}, {});return Object.entries(categoryTotals).map(([name, value]) => ({ name, value }));}, [filteredExpenses]);return jsxRuntimeExports.jsxs("div", {className: "min-h-screen bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-white transition-colors duration-300",children: [jsxRuntimeExports.jsx(Header, {onRefresh: gr,isFetching: _,isOffline: yt,onTabChange: nt,activeTab: rt}), jsxRuntimeExports.jsx("main", {className: "p-4 sm:p-6",children: jsxRuntimeExports.jsxs("div", {className: "max-w-7xl mx-auto",children: [rt === Tab.Report && jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, {children: [jsxRuntimeExports.jsxs("div", {className: "grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children: [jsxRuntimeExports.jsx("button", {onClick: () => setTimeRange("day"),className: `py-2 px-4 rounded-lg font-medium text-sm ${timeRange === "day" ? "bg-indigo-600 text-white" : "bg-white dark:bg-gray-800"}`,children: "Día"}), jsxRuntimeExports.jsx("button", {onClick: () => setTimeRange("week"),className: `py-2 px-4 rounded-lg font-medium text-sm ${timeRange === "week" ? "bg-indigo-600 text-white" : "bg-white dark:bg-gray-800"}`,children: "Semana"}), jsxRuntimeExports.jsx("button", {onClick: () => setTimeRange("month"),className: `py-2 px-4 rounded-lg font-medium text-sm ${timeRange === "month" ? "bg-indigo-600 text-white" : "bg-white dark:bg-gray-800"}`,children: "Mes"}), jsxRuntimeExports.jsx("button", {onClick: () => setTimeRange("year"),className: `py-2 px-4 rounded-lg font-medium text-sm ${timeRange === "year" ? "bg-indigo-600 text-white" : "bg-white dark:bg-gray-800"}`,children: "Año"})]}), jsxRuntimeExports.jsx(Charts, {categoryData: ur,barDataDaily: dr,barDataWeekly: fr,barDataMonthly: mr,isDarkMode: document.documentElement.classList.contains("dark")})]}), rt === Tab.Add && jsxRuntimeExports.jsx(AddExpenseForm, {formState: St,onFormChange: Et,onSubmit: Cr,onClose: () => nt(Tab.Report)}), rt === Tab.Settings && jsxRuntimeExports.jsx(Settings, {onSetBudget: Ir,onSetDailyGoal: vr,currentBudget: at,currentDailyGoal: ot,onLogout: Pr,isPWA: $t,onInstallPWA: _r,onDeleteData: yr,onExportData: br,onImportData: Sr,isSyncing: Ft,lastSync: Wt,onSync: Er,onLogin: Ar,user: Pt,onRegister: wr,onPasswordReset: Tr,authMode: kt,setAuthMode: Lt,onGptAnalyze: Lr,isGptAnalyzing: Kt,gptAnalysis: Ut,onCloseGptModal: () => Jt(!1)})]})}), jsxRuntimeExports.jsx(FloatingButton, {onClick: () => nt(Tab.Add)}), j && jsxRuntimeExports.jsx(Toast, {message: j.message,type: j.type,onClose: () => _e(null)}), et && jsxRuntimeExports.jsx(ConfirmationModal, {title: "Confirmar Acción",message: "¿Estás seguro de que quieres eliminar todos los datos? Esta acción no se puede deshacer.",onConfirm: () => {yr(), tt(!1)},onCancel: () => tt(!1)}), Ft && jsxRuntimeExports.jsx(SyncModal, {isSyncing: Ft,lastSync: Wt,onClose: () => Rt(!1)})]});};client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode, {children: jsxRuntimeExports.jsx(App, {})}));
